# ResearchAgent: Project Roadmap (v2.5.3 Target Base)

This document outlines the planned development path for the ResearchAgent project. It is a living document and will be updated as the project evolves.

## Guiding Principles for Development

-   Accuracy & Reliability Over Speed
-   User-in-the-Loop (UITL/HITL)
-   Modularity & Maintainability
-   Extensibility

## Phase 1: Core Stability & Foundational Tools (Largely Complete - Basis of v2.5.2)

-   UI Framework: Three-panel layout.
-   Backend Infrastructure: Python, WebSockets, `aiohttp`.
-   Task Management: Persistent storage, UI updates.
-   Core Agent Flow (P-C-E-E Pipeline).
-   Core Tools Implemented & Refined.
-   LLM Configuration.
-   Frontend & Backend Refactoring.
-   Backend Plan Proposal Mechanism.

## Phase 2: Enhanced Agent Capabilities & User Experience (Current & Near-Term Focus - Targeting v2.5.3)

1.  Core Agent Execution Stability & Feature Verification (Improved)
    -   `deep_research_synthesizer` & `write_file` Flow: Actual execution logic in place.
    -   `UnboundLocalError` in `callbacks.py`: **FIXED.**
2.  Refine Chat UI/UX & Message Flow (Significant Progress, Ongoing Polish)
    -   **Visual Design Goal (Achieved & Enhanced):** Implemented the chat interface based on `simulation_option6.html` with further refinements. HTML tags (`<strong>`, `<em>`) now render correctly.
    -   **Persistence (Implemented & Refined):** All new message structures (major steps, sub-statuses, thoughts, tool outputs, confirmed plans) are saved to and reloaded from the database with visual consistency.
    -   **Key Features & Bug Fixes:**
        -   **FIXED: Token Counter Per Agent:** UI token counter now updates correctly with tokens generated by each individual agent.
        -   **FIXED: File Upload:** File upload functionality to task workspaces is now operational.
        -   **IMPLEMENTED & REFINED: Enhanced In-Chat Tool Feedback & Usability:**
            -   Display tool action confirmations and output snippets (including `read_file` content) directly in chat using new message types (`tool_result_for_chat`) and UI elements.
            -   Implemented collapsible sections for longer tool outputs in chat (via label click).
            -   Added "Copy to Clipboard" functionality for tool outputs, agent thoughts, final agent answers, and code blocks.
            -   Refined Planner prompting to ensure agents provide more comprehensive final summary messages.
            -   Persistence for `tool_result_for_chat` messages is in place.
        -   **UI/UX Polish (Partially Addressed/Ongoing Focus):**
            -   **Chat Message Visuals & Density:** **Partially Addressed.** Sub-step indentation increased for better alignment. Message bubble widths adjusted (User/RA/Plans ~60%, Sub-steps ~40%). Step titles wrap at ~60%. Collapsible major steps and tool outputs improve density management. Blue line removed from RA final answers and Plan Proposals. Agent Avatar ("RA") added.
            -   **Button Placement & Consistency:** **Partially Addressed.** Tool output expansion is now primarily by label click; major steps are collapsible via their titles. Copy buttons are generally consistent.
            -   **PENDING:** Finalize "View \[artifact\] in Artifacts" links from tool output messages.
            -   **PENDING:** Review and refine the behavior and appearance of the global "agent-thinking-status" line.
            -   **PENDING:** Evaluate if further styling (e.g., boxing, copy button) is needed for agent step announcements beyond current collapsible titles.
        -   **FIXED: `read_file` Tool Output Visibility:** Content from `read_file` tool now correctly appears in its chat bubble.
        -   **FIXED: Chat Scroll Behavior:** Chat no longer jumps to bottom when expanding/collapsing message bubbles.
        -   **BUG (Medium Priority - Debugging Resumes): Artifact Viewer Refresh:** Ensure reliable auto-update after task completion.
        -   **WARNING (Low Priority): Plan File Status Update:** Correct regex for updating checkboxes in `_plan_{id}.md`.
        -   **REVIEW (Low Priority): "Unknown" History Message Types:** Confirm monitor log is the correct destination.
3.  DEBUG (Low Priority - Previously Medium): Monitor Log Color-Coding.
    -   Goal: Visually differentiate Monitor Log messages by source.
    -   PENDING/DEBUG: CSS rules in `style.css` need to be created/verified.

## Phase 3: Advanced Interactivity & Tooling (Mid-Term)

(No changes to this section's general goals yet)

-   Advanced User-in-the-Loop (UITL/HITL) Capabilities (e.g., interactive clarification, step modification during execution).
-   New Tools & Tool Enhancements (e.g., data visualization tools, advanced web Browse capabilities, code execution sandbox improvements).
-   Workspace RAG (Retrieval Augmented Generation over task workspace files).
-   Improved Agent Memory & Context Management (e.g., summarizing and recalling information from longer conversations or larger sets of documents more effectively).
-   **Further Chat Information Management (Consideration from UI/UX review):**
    -   Chat message filtering (toggle visibility of thoughts, tool outputs).
    -   Smart chat summaries for verbose tool outputs.

## Phase 4: Advanced Agent Autonomy & Specialized Applications (Longer-Term)

(No changes to this section's general goals yet)

-   Advanced Re-planning & Self-Correction.
-   User Permissions & Resource Gateway.
-   Streaming Output for LLM responses.
-   Specialized Agent Personas & Workflows.
-   Collaborative Features.
This roadmap will guide our development efforts. Feedback and adjustments are welcome.